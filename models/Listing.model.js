const mongoose = require("mongoose");
const { Schema, model } = mongoose;

const listingSchema = new Schema(
  {
    // unless you are defining more than the "type" property, you don't have to use {} (see below)
    // firstName: {type: String, require: true}
    title: String,
    brand: String, // .ToUpperCase

    size: { // will add a size charge on mouseover
      type: String,
      enum: [
        "Extra Small", 
        "Small", 
        "Medium", 
        "Large", 
        "Extra Large",
        "Other"
      ],
      default: "Medium"
    },
    condition: {
      type: String,
      enum: [
        "Brand New", 
        "Good", 
        "Fair"
      ],
      default: "Good"
    },
    category: {
      type: String,
      enum: [
        "Pants & Shorts", 
        "Suits & Jackets", 
        "Shirts & Buttondowns", 
        "Dresses & Skirts", 
        "Shoes",
        "Accessories",
        "Other"
      ],
      default: null
    },
    occasion: {
      type: String,
      enum: [
        "Night Out", 
        "Business", 
        "Casual", 
        "Athleisure", 
      ],
      default: "Night Out"  
    },  
    color: {
      type: String,
      enum: [
        "Black", 
        "White", 
        "Red", 
        "Yellow", 
        "Blue",
        "Green",
        "Pink",
        "Orange",
        "Other"
      ],
      default: null
    },
    // size: { type: Schema.Types.ObjectId, ref: 'ListingSize' }, // make these properties of these schema
    // condition: { type: Schema.Types.ObjectId, ref: 'ListingCondition' }, // enum to display array of items instead
    // category: { type: Schema.Types.ObjectId, ref: 'ListingCategory' },
    // color: { type: Schema.Types.ObjectId, ref: 'ListingColor' },
    description: String,
    // we want to reference users inside the listing model and for that we will use their IDs
    // this is telling us that in "user" property of each listing object, we will have
    // saved ObjectId (id that is automatically generated by MongoDB) that belongs to one of the users from the users collection
    user: { type: Schema.Types.ObjectId, ref: "user" },
    price: { type: Number }, // find out how to make it 2 decimals for price
    rating: Number // v2
  },
  {
    timestamps: true
  }
);

// const user = model('user', userSchema);
// module.exports = user;

module.exports = model("Listing", listingSchema);
